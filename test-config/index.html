
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="YAML configuration breakdown">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.5.10">
    
    
      
        <title>YAML configuration - Intensive Brew</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.472b142f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.08040f6c.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#yaml-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Intensive Brew" class="md-header__button md-logo" aria-label="Intensive Brew" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M88 0C74.7 0 64 10.7 64 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1c16.3 14.2 23.8 21.8 23.8 37.9 0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C119.5 47.7 112 40.1 112 24c0-13.3-10.7-24-24-24zM32 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c53 0 96-43 96-96h16c61.9 0 112-50.1 112-112s-50.1-112-112-112H32zm352 64h16c26.5 0 48 21.5 48 48s-21.5 48-48 48h-16v-96zM224 24c0-13.3-10.7-24-24-24s-24 10.7-24 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1c16.3 14.2 23.8 21.8 23.8 37.9 0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C231.5 47.7 224 40.1 224 24z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intensive Brew
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              YAML configuration
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="pink" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/AbdelrhmanHamouda/intensive-brew" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
  </div>
  <div class="md-source__repository">
    intensive-brew
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Intensive Brew" class="md-nav__button md-logo" aria-label="Intensive Brew" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M88 0C74.7 0 64 10.7 64 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1c16.3 14.2 23.8 21.8 23.8 37.9 0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C119.5 47.7 112 40.1 112 24c0-13.3-10.7-24-24-24zM32 192c-17.7 0-32 14.3-32 32v192c0 53 43 96 96 96h192c53 0 96-43 96-96h16c61.9 0 112-50.1 112-112s-50.1-112-112-112H32zm352 64h16c26.5 0 48 21.5 48 48s-21.5 48-48 48h-16v-96zM224 24c0-13.3-10.7-24-24-24s-24 10.7-24 24c0 38.9 23.4 59.4 39.1 73.1l1.1 1c16.3 14.2 23.8 21.8 23.8 37.9 0 13.3 10.7 24 24 24s24-10.7 24-24c0-38.9-23.4-59.4-39.1-73.1l-1.1-1C231.5 47.7 224 40.1 224 24z"/></svg>

    </a>
    Intensive Brew
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/AbdelrhmanHamouda/intensive-brew" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2A10 10 0 0 0 2 12c0 4.42 2.87 8.17 6.84 9.5.5.08.66-.23.66-.5v-1.69c-2.77.6-3.36-1.34-3.36-1.34-.46-1.16-1.11-1.47-1.11-1.47-.91-.62.07-.6.07-.6 1 .07 1.53 1.03 1.53 1.03.87 1.52 2.34 1.07 2.91.83.09-.65.35-1.09.63-1.34-2.22-.25-4.55-1.11-4.55-4.92 0-1.11.38-2 1.03-2.71-.1-.25-.45-1.29.1-2.64 0 0 .84-.27 2.75 1.02.79-.22 1.65-.33 2.5-.33.85 0 1.71.11 2.5.33 1.91-1.29 2.75-1.02 2.75-1.02.55 1.35.2 2.39.1 2.64.65.71 1.03 1.6 1.03 2.71 0 3.82-2.34 4.66-4.57 4.91.36.31.69.92.69 1.85V21c0 .27.16.59.67.5C19.14 20.16 22 16.42 22 12A10 10 0 0 0 12 2Z"/></svg>
  </div>
  <div class="md-source__repository">
    intensive-brew
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          YAML configuration
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        YAML configuration
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#locust-configuration" class="md-nav__link">
    Locust configuration
  </a>
  
    <nav class="md-nav" aria-label="Locust configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-entry-point" class="md-nav__link">
    Test entry point
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-load-requirements" class="md-nav__link">
    Test load requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-load-shapes" class="md-nav__link">
    Custom load shapes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-nodes-configuration" class="md-nav__link">
    Cluster nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="Cluster nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locust-container-image" class="md-nav__link">
    Locust container image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes-test-configuration-map" class="md-nav__link">
    Kubernetes test configuration map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker-replicas-count" class="md-nav__link">
    Worker replicas count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expert-mode" class="md-nav__link">
    Expert mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-yaml-spec" class="md-nav__link">
    Full YAML spec
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#locust-configuration" class="md-nav__link">
    Locust configuration
  </a>
  
    <nav class="md-nav" aria-label="Locust configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#test-entry-point" class="md-nav__link">
    Test entry point
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#test-load-requirements" class="md-nav__link">
    Test load requirements
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-load-shapes" class="md-nav__link">
    Custom load shapes
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-nodes-configuration" class="md-nav__link">
    Cluster nodes configuration
  </a>
  
    <nav class="md-nav" aria-label="Cluster nodes configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#locust-container-image" class="md-nav__link">
    Locust container image
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubernetes-test-configuration-map" class="md-nav__link">
    Kubernetes test configuration map
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#worker-replicas-count" class="md-nav__link">
    Worker replicas count
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#expert-mode" class="md-nav__link">
    Expert mode
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-yaml-spec" class="md-nav__link">
    Full YAML spec
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/AbdelrhmanHamouda/intensive-brew/edit/master/docs/test-config.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="yaml-configuration">YAML configuration<a class="headerlink" href="#yaml-configuration" title="Anchor link to this section for reference">⚓</a></h1>
<p>In order to generate a valid <a href="https://abdelrhmanhamouda.github.io/locust-k8s-operator/getting_started/#step-2-write-a-valid-custom-resource-for-locusttest-crd">LocustTest</a> custom resource, a valid yaml configuration should be prepared.</p>
<p>The following sections will break-down the supported configuration and provide the full YAML spec at the end.</p>
<div class="admonition note">
<p class="admonition-title">Note<p>Although all following examples are for a single test, <em>Intensive Brew</em> supports having several <em>test</em> configurations in the same <code>.yaml</code> file.</p>
</p>
</div>
<h2 id="locust-configuration">Locust configuration<a class="headerlink" href="#locust-configuration" title="Anchor link to this section for reference">⚓</a></h2>
<p>This sections highlight all the available options that would impact the configuration of <em>Locust</em>. </p>
<h3 id="test-entry-point">Test entry point<a class="headerlink" href="#test-entry-point" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>entry_point: str</code> is a <strong>mandatory</strong> field that allows <em>Intensive Brew</em> to know which <code>.py</code> file to use as an entry to <em>locust</em>.</p>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="nt">entry_point</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;path&gt;/demo.py&quot;</span><span class="w"> </span><span class="c1"># (1)!</span><span class="w"></span>
</code></pre></div>
<ol>
<li>The provided <code>path</code> must be relative to the location of <code>test-config.yaml</code>.</li>
</ol>
<h3 id="test-load-requirements">Test load requirements<a class="headerlink" href="#test-load-requirements" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>vanilla_specs: object</code> is a <strong>mandatory</strong> section that can be used to configure:</p>
<ul>
<li>Number of users</li>
<li>Users spawn rate</li>
<li>Test duration</li>
<li>Target host of the test</li>
</ul>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">vanilla_specs</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Number of users</span><span class="w"></span>
<span class="w">      </span><span class="nt">users</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Users spawn rate</span><span class="w"></span>
<span class="w">      </span><span class="nt">spawn_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Test duration</span><span class="w"></span>
<span class="w">      </span><span class="nt">run_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (1)!</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Test target URL </span><span class="w"></span>
<span class="w">      </span><span class="nt">target_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
</code></pre></div>
<ol>
<li>This field support different was of expressing duration e.g. (<code>300s</code>, <code>20m</code>, <code>3h</code>, <code>1h30m</code>, etc.). Default value is <code>30s</code>.</li>
</ol>
<h3 id="custom-load-shapes">Custom load shapes<a class="headerlink" href="#custom-load-shapes" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>custom_load_shapes: bool</code> is an <strong>optional</strong> flag that enables the support of <em>Locust</em> "<strong><em><a href="https://docs.locust.io/en/stable/custom-load-shape.html">Custom Load Shapes</a></em></strong>" feature. This feature doesn't follow the traditional way of declaring users, spawn rate and test run duration.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul>
<li>When this flag is set to <strong><em>true</em></strong>, the <code>vanilla_specs</code> section becomes <strong>optional</strong> and is ignored even if provided.</li>
<li>Additional configuration like <strong>test target host</strong> is expected to be passed through custom config files or directly coded into the test.</li>
</ul>
</div>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain"># * Enable &quot;custom load shapes&quot; support. Default</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span><span class="w"></span>
<span class="w">    </span><span class="nt">custom_load_shapes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span><span class="w"></span>
</code></pre></div>
<h2 id="cluster-nodes-configuration">Cluster nodes configuration<a class="headerlink" href="#cluster-nodes-configuration" title="Anchor link to this section for reference">⚓</a></h2>
<p>This sections highlight all the available options that would impact the configuration of the deployed cluster nodes.</p>
<h3 id="locust-container-image">Locust container image<a class="headerlink" href="#locust-container-image" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>image: str</code>  is an <strong>optional</strong> flag that instructs <em>Intensive Brew</em> to populate the <code>image</code> field in <em>LocustTest</em>. Default is to use the latest <em><a href="https://hub.docker.com/r/locustio/locust#!">Locust</a></em> image.</p>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
</code></pre></div>
<h3 id="kubernetes-test-configuration-map">Kubernetes test configuration map<a class="headerlink" href="#kubernetes-test-configuration-map" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>configmap: str</code> is an <strong>optional</strong> flag that instructs <em>Intensive Brew</em> to populate the <code>configMap</code> field in <em>LocustTest</em>. This is a feature supported by the <em>Locust Operator</em> where it is possible to [deploy tests as k8s <code>configMap</code>] and then having it mounted on the load generation pods.</p>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">configmap</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;valid k8s configMap name&gt;</span><span class="w"></span>
</code></pre></div>
<h3 id="worker-replicas-count">Worker replicas count<a class="headerlink" href="#worker-replicas-count" title="Anchor link to this section for reference">⚓</a></h3>
<p><code>worker_replicas: int</code> is an <strong>optional</strong> flag that instructs <em>Intensive Brew</em> to populate the <code>workerReplicas</code> field in <em>LocustTest</em>. Default value is 5.</p>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">worker_replicas</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"></span>
</code></pre></div>
<h2 id="expert-mode">Expert mode<a class="headerlink" href="#expert-mode" title="Anchor link to this section for reference">⚓</a></h2>
<p><code>expert_mode: obj</code> is an <strong>optional</strong> section that grants direct control over what the <em>LocustTest</em> fields for <code>masterCommandSeed</code> &amp; <code>workerCommandSeed</code> will contain.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<ul>
<li>When this section is set, all other sections from the <a href="#locust-configuration">"Locust configuration"</a> section becomes <strong>optional</strong> and is ignored even if provided.</li>
</ul>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ul>
<li>Activating this mode will suppress any processing of the data and directly pass the command "as-is".</li>
<li>If you find yourself using this mode frequently, consider opening a <a href="https://github.com/AbdelrhmanHamouda/intensive-brew/issues">feature request</a> to support your use case instead.  </li>
</ul>
</div>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">...</span><span class="w"></span>
<span class="w">  </span><span class="l l-Scalar l-Scalar-Plain">test_name</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="c1"># ! USE WITH CAUTION</span><span class="w"></span>
<span class="w">    </span><span class="nt">expert_mode</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Enable expert mode. Default: false</span><span class="w"></span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bool</span><span class="w"></span>
<span class="w">      </span><span class="c1"># * Commands to pass &quot;as-is&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">masterCommandSeed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
<span class="w">      </span><span class="nt">workerCommandSeed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
</code></pre></div>
<h2 id="full-yaml-spec">Full YAML spec<a class="headerlink" href="#full-yaml-spec" title="Anchor link to this section for reference">⚓</a></h2>
<div class="highlight"><span class="filename">test-config.yaml</span><pre><span></span><code><span class="nt">configurations</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="c1"># Test name</span><span class="w"></span>
<span class="w">  </span><span class="nt">load_test</span><span class="p">:</span><span class="w"></span>

<span class="w">    </span><span class="c1">#  Entry point script</span><span class="w"></span>
<span class="w">    </span><span class="nt">entry_point</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (1)!</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Load requirements</span><span class="w"></span>
<span class="w">    </span><span class="nt">vanilla_specs</span><span class="p">:</span><span class="w"> </span>
<span class="w">      </span><span class="c1"># Number of users</span><span class="w"></span>
<span class="w">      </span><span class="nt">users</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"> </span><span class="c1"># (2)!</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Users spawn rate</span><span class="w"></span>
<span class="w">      </span><span class="nt">spawn_rate</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"> </span><span class="c1"># (3)!</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Test duration</span><span class="w"></span>
<span class="w">      </span><span class="nt">run_time</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (4)!</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Test target URL </span><span class="w"></span>
<span class="w">      </span><span class="nt">target_host</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (5)!</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Custom load shapes support.</span><span class="w"></span>
<span class="w">    </span><span class="nt">custom_load_shapes</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bool</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Locust container image</span><span class="w"></span>
<span class="w">    </span><span class="nt">image</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (8)!</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Test configuration map</span><span class="w"></span>
<span class="w">    </span><span class="nt">configmap</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"> </span><span class="c1"># (6)!</span><span class="w"></span>

<span class="w">    </span><span class="c1"># Worker replicas</span><span class="w"></span>
<span class="w">    </span><span class="nt">worker_replicas</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">int</span><span class="w"> </span><span class="c1"># (7)!</span><span class="w"></span>

<span class="w">    </span><span class="c1"># ! USE WITH  CAUTION</span><span class="w"></span>
<span class="w">    </span><span class="nt">expert_mode</span><span class="p">:</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Enable expert mode. Default: false</span><span class="w"></span>
<span class="w">      </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">bool</span><span class="w"></span>
<span class="w">      </span><span class="c1"># Commands to pass &quot;as-is&quot;</span><span class="w"></span>
<span class="w">      </span><span class="nt">masterCommandSeed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
<span class="w">      </span><span class="nt">workerCommandSeed</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">str</span><span class="w"></span>
</code></pre></div>
<ol>
<li>This field maps to the <code>--locustfile</code> locust switch and appears in <code>masterCommandSeed</code> &amp; <code>workerCommandSeed</code> of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>--users</code> locust switch and appears in <code>masterCommandSeed</code> of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>--spawn-rate</code> locust switch and appears in <code>masterCommandSeed</code> of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>--run-time</code> locust switch and appears in <code>masterCommandSeed</code> of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>--host</code> locust switch and appears in <code>masterCommandSeed</code> of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>configMap</code>  section of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>workerReplicas</code>  section of the <em>LocustTest custom resource</em>.</li>
<li>This field maps to the <code>image</code>  section of the <em>LocustTest custom resource</em>.</li>
</ol>

  <hr>
<div class="md-source-file">
  <small>
    
      Last update:
      <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">November 22, 2022</span>
      
    
  </small>
</div>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href=".." class="md-footer__link md-footer__link--prev" aria-label="Previous: Introduction" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introduction
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2022 – <a href="#__consent">Change cookie settings</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    <a href="https://hub.docker.com/r/lotest/intensive-brew" target="_blank" rel="noopener" title="Intensive Brew on DockerHub" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1v59.4zm0-204.3h-66.1v60.7h66.1V32zm78.2 144.8H362v59.4h66.1v-59.4zm-156.3-72.1h-66.1v60.1h66.1v-60.1zm78.1 0h-66.1v60.1h66.1v-60.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1l-13.3-8.9zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1v-59.4zm-78.1-72.1h-66.1v60.1h66.1v-60.1z"/></svg>
    </a>
  
    
    
    <a href="https://github.com/AbdelrhmanHamouda/intensive-brew/issues" target="_blank" rel="noopener" title="Report a bug!" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M256 0c53 0 96 43 96 96v3.6c0 15.7-12.7 28.4-28.4 28.4H188.4c-15.7 0-28.4-12.7-28.4-28.4V96c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7.7 1.3 1.4 1.9 2.1 14.2-7.3 30.4-11.4 47.5-11.4H312c17.1 0 33.2 4.1 47.5 11.4.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7.7-1.4 1.3-2.1 1.9 6.2 12 10.1 25.3 11.1 39.5H480c17.7 0 32 14.3 32 32s-14.3 32-32 32h-64c0 24.6-5.5 47.8-15.4 68.6 2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6V240c0-8.8-7.2-16-16-16s-16 7.2-16 16v239.2c-34.5-3.4-65.8-17.8-90.3-39.6l-63 63c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320H32c-17.7 0-32-14.3-32-32s14.3-32 32-32h64.3c1.1-14.1 5-27.5 11.1-39.5-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-consent" data-md-component="consent" id="__consent" hidden>
        <div class="md-consent__overlay"></div>
        <aside class="md-consent__inner">
          <form class="md-consent__form md-grid md-typeset" name="consent">
            


  
    
  




<h4>Cookie consent</h4>
<p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p>
<input class="md-toggle" type="checkbox" id="__settings" >
<div class="md-consent__settings">
  <ul class="task-list">
    
      
      
        
        
      
      <li class="task-list-item">
        <label class="task-list-control">
          <input type="checkbox" name="github" checked>
          <span class="task-list-indicator"></span>
          GitHub
        <label>
      </li>
    
  </ul>
</div>
<div class="md-consent__controls">
  
    
    
    
      <label class="md-button" for="__settings">Manage settings</label>
    
  
    
      <button class="md-button md-button--primary">Accept</button>
    
    
    
  
    
    
      <button type="reset" class="md-button md-button--primary">Reject</button>
    
    
  
</div>
          </form>
        </aside>
      </div>
      <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout(function(){document.querySelector("[data-md-component=consent]").hidden=!1},250);var action,form=document.forms.consent;for(action of["submit","reset"])form.addEventListener(action,function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);console.log(new FormData(form)),__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map(function(e){return[e,!0]}))),location.hash="",location.reload()})</script>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["search.highlight", "search.share", "navigation.tracking", "navigation.top", "toc.follow", "content.code.annotate"], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d6c3db9e.min.js"></script>
      
    
  </body>
</html>